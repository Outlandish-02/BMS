(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"077d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("q-layout",{attrs:{id:"q-app-2",view:"lHh Lpr lFf"}},[i("q-header",{staticClass:"glossy",class:t.drawerState?" bg-black":"bg-primary",staticStyle:{height:"150px"},attrs:{elevated:""}},[i("q-toolbar",{staticClass:"justify-center"},[i("q-img",{staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:a("4b51")}}),i("div",{staticClass:"fixed-top-right"},[i("user-account")],1)],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-2 col-2"},[i("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"6.5rem",width:"7.3rem",margin:"1.3rem","border-radius":"0.5rem"},attrs:{basic:"",src:a("73b8")}})],1),i("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"1.7rem"}},[i("q-item-label",{staticStyle:{"font-size":"1.5rem",color:"white"},attrs:{overline:""}},[t._v("Creación de un Mantenimiento")])],1)])],1),i("q-page-container",{staticStyle:{"margin-top":"-8rem"}},[i("maintenance-input"),i("br")],1)],1)],1)},s=[],r=a("dddf"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem","margin-top":"-2rem"}}),a("div",{staticClass:"row no-wrap justify-end"},[a("div",{staticClass:"col-auto"},[a("q-btn",{staticClass:"btnGuardarStyle",attrs:{label:"Guardar",color:"primary",push:"",icon:"save"},on:{click:t._insertMaintenance}}),a("q-btn",{staticClass:"btnSalirStyle",attrs:{push:"",icon:"logout",label:"Salir",color:"primary"},on:{click:function(e){t.confirm=!0}}})],1)]),a("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-9 divP"},[a("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-input",{staticClass:"qInputStyle",attrs:{disable:"",filled:"",label:t.InChargeName},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}])})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-input",{staticClass:"qInputStyle",attrs:{color:"primary",filled:"",label:"Costo de Mantenimiento"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.costoMantenimiento,callback:function(e){t.costoMantenimiento=e},expression:"costoMantenimiento"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("q-select",{staticClass:"qInputStyle",attrs:{filled:"",options:t.options,label:"Tipo De Mantenimiento"},model:{value:t.TipoMantenimiento,callback:function(e){t.TipoMantenimiento=e},expression:"TipoMantenimiento"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("activity-list")],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("material-list")],1),a("div",{staticClass:"col-12 col-sm-6 col-lg-4 col-md-4"},[a("tool-list")],1)])]),a("div",{staticClass:"col-3 justify-center",staticStyle:{"margin-left":"-2rem"}},[a("q-toolbar",[a("q-img",{staticClass:"imageStyle",attrs:{src:t.ImagenEquipo}})],1),a("q-dialog",{model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("¡Registro guardado!")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("Su registro ha sido guardado exitosamente")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",to:"/MaintenanceList",color:"primary"}})],1)],1)],1),a("q-dialog",{model:{value:t.alertfalse,callback:function(e){t.alertfalse=e},expression:"alertfalse"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("¡Registro no guardado!")])]),a("q-card-section",{staticClass:"q-pt-none"},[t._v("Su registro no ha sido guardado, verifique que ha ingresado los\n            datos correctos y vuelva a intentarlo")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OK",color:"blue"}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"keyboard_return",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("¿Seguro que deseas salir?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Salir",to:"/MaintenanceList",color:"primary"}})],1)],1)],1)],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"-1rem"}},[a("div",{staticClass:"divS"},[a("h5",{staticClass:"glossy text-center bg-blue-10",staticStyle:{color:"white","font-family":"Serif","border-radius":"0.5rem"}},[t._v("\n        Observaciones\n      ")]),a("div",{staticClass:"q-pa-md q-gutter-sm",staticStyle:{"margin-top":"-2.8rem"}},[a("q-editor",{attrs:{toolbar:[["bold","italic","strike","underline"]]},model:{value:t.Observaciones,callback:function(e){t.Observaciones=e},expression:"Observaciones"}})],1),a("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem","margin-top":"0rem"}})])])])},n=[],l=(a("e6cf"),a("ddb0"),a("ded3")),c=a.n(l),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"90%"},attrs:{label:"Lista de Actividades",unelevated:"","text-color":"white",color:"blue-10",transparent:""},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"500px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Actividades")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Descripcion de a Actividad"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.newActivity,callback:function(e){t.newActivity=e},expression:"newActivity"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:t.addNewAct}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.actividades,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i))]),a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Acceptar",color:"blue"}})],1)],1)],1)],1)},p=[],u=(a("a434"),{data(){return{basic:!1,fixed:!1,newActivity:"",actividades:[]}},methods:{addNewAct(){""!==this.newActivity?(this.actividades.push(this.newActivity),this.Actividades=[...this.actividades],this.newActivity=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa una actividad!!."})},eliminar(t){this.actividades.splice(t,1)}},computed:{Actividades:{get(){return this.$store.state.global.Actividades},set(t){this.$store.commit("global/updateActividades",t)}}}}),m=u,h=a("2877"),g=a("9c40"),v=a("24e8"),b=a("f09f"),q=a("a370"),f=a("eb85"),w=a("27f9"),S=a("0016"),C=a("1c1c"),y=a("66e5"),x=a("4074"),M=a("4b7e"),_=a("714f"),$=a("7f67"),Q=a("eebe"),k=a.n(Q),A=Object(h["a"])(m,d,p,!1,null,null,null),I=A.exports;k()(A,"components",{QBtn:g["a"],QDialog:v["a"],QCard:b["a"],QCardSection:q["a"],QSeparator:f["a"],QInput:w["a"],QIcon:S["a"],QList:C["a"],QItem:y["a"],QItemSection:x["a"],QCardActions:M["a"]}),k()(A,"directives",{Ripple:_["a"],ClosePopup:$["a"]});var N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"90%"},attrs:{label:"Lista de Materiales",unelevated:"","text-color":"white",color:"blue-10"},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"500px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Materiales")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Material"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.material,callback:function(e){t.material=e},expression:"material"}}),a("br"),a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Cantidad"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:t.addNewMaterial}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.materiales,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(e.Cantidad))]),a("q-item-section",[t._v(t._s(e.Material))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Aceptar",color:"blue"}})],1)],1)],1)],1)},D=[],E={data(){return{basic:!1,fixed:!1,materialobj:{},material:"",cantidad:"",materiales:[]}},methods:{addNewMaterial(){""!==this.material&&""!==this.cantidad?(this.materialobj.Material=this.material,this.materialobj.Cantidad=this.cantidad,this.materiales.push(this.materialobj),this.materialobj={},this.Materiales=[...this.materiales],this.material="",this.cantidad=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa correctamente el Material y la Cantidad"})},eliminar(t){this.materiales.splice(t,1)}},computed:{Materiales:{get(){return this.$store.state.global.Materiales},set(t){this.$store.commit("global/updateMateriales",t)}}}},R=E,F=Object(h["a"])(R,N,D,!1,null,null,null),L=F.exports;k()(F,"components",{QBtn:g["a"],QDialog:v["a"],QCard:b["a"],QCardSection:q["a"],QSeparator:f["a"],QInput:w["a"],QIcon:S["a"],QList:C["a"],QItem:y["a"],QItemSection:x["a"],QCardActions:M["a"]}),k()(F,"directives",{Ripple:_["a"],ClosePopup:$["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticStyle:{height:"54px",width:"90%"},attrs:{label:"Lista de Herramientas",unelevated:"","text-color":"white",color:"blue-10",transparent:""},on:{click:function(e){t.fixed=!0}}}),a("q-dialog",{model:{value:t.fixed,callback:function(e){t.fixed=e},expression:"fixed"}},[a("q-card",{staticStyle:{width:"500%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Lista de Herramientas")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh",width:"100%"}},[a("q-input",{staticStyle:{width:"100%"},attrs:{color:"blue",filled:"",label:"Descripcion de la Herramienta"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"line_weight"}})]},proxy:!0}]),model:{value:t.newTool,callback:function(e){t.newTool=e},expression:"newTool"}}),a("br"),a("q-btn",{staticClass:"float-right",attrs:{color:"positive",push:""},on:{click:function(e){return t.addNewAct(t.newTool)}}},[t._v("Agregar")])],1),a("q-separator"),a("q-card-section",[a("q-list",{attrs:{bordered:""}},t._l(t.herramientas,(function(e,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(i))]),a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{size:"sm",color:"white"},on:{click:function(e){return t.eliminar(i)}}},[a("q-icon",{attrs:{name:"delete",color:"red"}})],1)],1)],1)})),1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Quitar",color:"blue"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Aceptar",color:"blue"}})],1)],1)],1)],1)},T=[],H={data(){return{basic:!1,fixed:!1,newTool:"",herramientas:[]}},methods:{addNewAct(t){""!==this.newTool?(this.herramientas.push(t),this.Herramientas=[...this.herramientas],this.newTool=""):this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"Ingresa una Herramienta!!."})},eliminar(t){this.herramientas.splice(t,1)}},computed:{Herramientas:{get(){return this.$store.state.global.Herramientas},set(t){this.$store.commit("global/updateHerramientas",t)}}}},j=H,z=Object(h["a"])(j,O,T,!1,null,null,null),P=z.exports;k()(z,"components",{QBtn:g["a"],QDialog:v["a"],QCard:b["a"],QCardSection:q["a"],QSeparator:f["a"],QInput:w["a"],QIcon:S["a"],QList:C["a"],QItem:y["a"],QItemSection:x["a"],QCardActions:M["a"]}),k()(z,"directives",{Ripple:_["a"],ClosePopup:$["a"]});var B=a("5d36"),U=a("a6a3"),G={components:{ActivityList:I,MaterialList:L,ToolList:P},data(){return{alert:!1,alertfalse:!1,confirm:!1,modelServicio:!0,modelGarantia:!0,files:null,TipoMantenimiento:null,lastRoute:"/MaintenanceList",fechaHoy:"",idEquipo:"",Material:"",Cantidad:"",Observaciones:"",costoMantenimiento:"",dateCompra:"",InChargeName:"",ImagenEquipo:"",options:["Preventivo","Correctivo"],reportesAux:[]}},created(){this.inicializacionVariables(),this.$store.state.global.Flags.reporte.Status?this.createMaintenanceOfReport():this.createNormalMaintenance()},destroyed(){this.$q.loading.hide()},computed:{IDEM:{get(){return this.$store.state.cardState.IDEM}},Actividades:{get(){return this.$store.state.global.Actividades}},Materiales:{get(){return this.$store.state.global.Materiales}},Cantidades:{get(){return this.$store.state.global.Cantidades}},Herramientas:{get(){return this.$store.state.global.Herramientas}},Usuario:{get(){return this.$store.state.global.Usuario}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}},Reportes:{get(){return this.$store.state.cardState.Reportes},set(t){this.$store.commit("cardState/updateReportes",t)}},MaintenanceSectionSelected:{get(){return this.$store.state.cardState.MaintenanceSectionSelected},set(t){this.$store.commit("cardState/updateMaintenanceSectionSelected",t)}},ReportSectionSelected:{get(){return this.$store.state.cardState.ReportSectionSelected},set(t){this.$store.commit("cardState/updateReportSectionSelected",t)}},Equipos:{get(){return this.$store.state.cardState.Equipos},set(t){this.$store.commit("cardState/updateEquipments",t)}}},methods:{async _insertMaintenance(){let t="",e="",a=new Date,i=a.getSeconds(),s=a.getMinutes(),r=a.getHours(),o=a.getDate(),n=a.getMonth()+1,l=a.getFullYear();t=n<10?`${l}-0${n}`:`${l}-${n}`,e=`${o}-${r}:${s}:${i}`;var d={ID_Equipo:this.$data.idEquipo,Fecha:t,Dia:e,Tipo_Mantenimiento:this.$data.TipoMantenimiento,Nombre_Encargado:this.$data.InChargeName,Costo_Mantenimiento:parseInt(this.$data.costoMantenimiento),Observaciones:this.Observaciones,Descripcion:this.Actividades,Herramientas:this.Herramientas,Materiales:this.Materiales,Cantidad:this.Cantidades};let p;this.$q.loading.show({spinner:U["a"],spinnerColor:"indigo-10",spinnerSize:50,backgroundColor:"indigo-11",message:"Subiendo Mantenimiento",messageColor:"indigo-10"});let u=(new Date).getMonth().toString().length;1==u&&(p="0"+((new Date).getMonth()+1).toString());let m={Mes:p,"Año":(new Date).getFullYear()};this.MaintenanceSectionSelected=m,this.ReportSectionSelected=m;try{if("/MaintenanceList"==this.Flags.lastRoute){await B["a"].createMaintenance(d);this.$q.loading.hide(),this.alert=!0,await this.$store.dispatch("cardState/postStatisticAction")}else if(this.Flags.reporte.Status){await B["a"].createMaintenance(d);try{let t={Fecha:this.Flags.reporte.Fecha,Dia:this.Flags.reporte.Dia,Status:!1};await B["a"].updateReport(t);for(var h=0;h<this.Reportes.length;h++)this.Reportes[h].Dia===this.Flags.reporte.Dia&&(this.Reportes[h]=c()(c()({},this.Reportes[h]),this.Flags.reporte));this.$q.notify({color:"green",textColor:"white",icon:"notification_important",message:"Se verificó el reporte automáticamente"}),await this.$store.dispatch("cardState/postStatisticAction")}catch(g){this.$q.notify({color:"orange",textColor:"white",icon:"notification_important",message:"No se pudo actualizar el Status del reporte, por favor actualizalo manualmente a verificado"})}this.$q.loading.hide(),this.alert=!0}}catch(g){this.alertfalse=!0,this.$q.loading.hide()}},createMaintenanceOfReport(){this.Equipos.forEach((t=>{t.ID_Equipo==this.Flags.reporte.ID_Equipo&&(this.ImagenEquipo=t.Foto)})),this.TipoMantenimiento="Correctivo",this.Observaciones="<b>A causa de un reporte por: \n </b>"+this.Flags.reporte.Reporte,this.lastRoute=this.Flags.lastRoute},createNormalMaintenance(){this.ImagenEquipo=this.$store.state.cardState.EquipoSelected[0].Foto},inicializacionVariables(){this.idEquipo=this.IDEM,this.InChargeName=this.Usuario.name,this.reportesAux=[...this.Reportes]}}},J=G,K=(a("3ed2"),a("ddd8")),V=a("65c6"),Y=a("068f"),W=a("cb32"),X=a("d66b"),Z=Object(h["a"])(J,o,n,!1,null,"2d9310da",null),tt=Z.exports;k()(Z,"components",{QBtn:g["a"],QInput:w["a"],QIcon:S["a"],QSelect:K["a"],QToolbar:V["a"],QImg:Y["a"],QDialog:v["a"],QCard:b["a"],QCardSection:q["a"],QCardActions:M["a"],QAvatar:W["a"],QEditor:X["a"]}),k()(Z,"directives",{ClosePopup:$["a"]});var et={name:"MaintenanceCreate",components:{UserAccount:r["a"],MaintenanceInput:tt},data(){return{leftDrawerOpen:!1,Numero:9,home:!1}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},at=et,it=(a("5fd4"),a("4d5a")),st=a("e359"),rt=a("0170"),ot=a("09e3"),nt=Object(h["a"])(at,i,s,!1,null,null,null);e["default"]=nt.exports;k()(nt,"components",{QLayout:it["a"],QHeader:st["a"],QToolbar:V["a"],QImg:Y["a"],QItemLabel:rt["a"],QPageContainer:ot["a"]})},"1cc3":function(t,e,a){},"3ed2":function(t,e,a){"use strict";var i=a("e1c8"),s=a.n(i);s.a},"5fd4":function(t,e,a){"use strict";var i=a("1cc3"),s=a.n(i);s.a},e1c8:function(t,e,a){}}]);