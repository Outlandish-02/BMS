(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"02cd":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"q-pa-md",attrs:{id:"q-app",view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"glossy",class:t.drawerState?" bg-black":"bg-primary",staticStyle:{height:"150px"},attrs:{elevated:""}},[a("q-toolbar",{staticClass:"justify-center"},[a("q-img",{staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:s("4b51")}}),a("div",{staticClass:"fixed-top-right"},[a("user-account")],1)],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2 col-2"},[a("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"6.5rem",width:"7.3rem",margin:"1.3rem","border-radius":"0.5rem"},attrs:{basic:"",src:s("73b8")}},[t.home?a("div",{staticClass:"absolute-full text-subtitle2 flex flex-center"},[a("q-img",{staticStyle:{"margin-top":"-0.4rem"},attrs:{basic:"",src:s("fbf5")}})],1):t._e(),a("q-btn",{staticStyle:{height:"6.5rem",width:"7.3rem","border-radius":"0.5rem"},attrs:{to:"/Home"},on:{mouseover:function(e){t.home=!0},mouseleave:function(e){t.home=!1}}})],1)],1),a("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"1.7rem"}},[a("q-item-label",{staticStyle:{"font-size":"1.5rem",color:"white"},attrs:{overline:""}},[t._v("Indicadores")])],1)])],1),a("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem","margin-top":"-0.5rem"}}),a("div",{staticClass:"row no-wrap justify-end"},[a("div",{staticClass:"col-auto"},[a("q-btn",{staticStyle:{margin:"1rem"},attrs:{push:"",icon:"logout",label:"Salir",color:"primary",to:"/StatisticsSection"}})],1)]),a("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem"}}),a("q-page-container",{staticStyle:{"margin-top":"-8rem"}},[a("router-view"),a("grid-statistics",{staticStyle:{margin:"0.3rem"}})],1)],1)},i=[],r=s("dddf"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[t.spinner?s("q-spinner-gears",{staticClass:"fixed-center z-top",attrs:{indeterminate:"",reverse:"",size:"100px",thickness:1,color:"blue","track-color":"light-blue"}}):t._e(),t.spinner?s("q-item-label",{staticClass:"fixed-center labelCargando z-top text-white",staticStyle:{"background-color":"rgb(0, 0, 0, 0.6)","border-radius":"0.5rem",padding:"0.5rem"},attrs:{overline:""}},[t._v("Cargando estadísticas...")]):t._e(),t._l(t.ArrayStatistics,(function(t,e){return s("div",{key:e,staticClass:"col-lg-3 col-md-4 col-sm-6 col-xs-12"},[s("card-statistics",{attrs:{StatisticsValue:t.StatisticsValue,StatisticsLabel:t.StatisticsLabel}})],1)}))],2)])},n=[],c=(s("fb6a"),s("e6cf"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-center"},[s("q-card",{staticClass:"my-card"},[s("q-card-section",[s("div",{staticClass:"flex flex-center"},[s("q-card-section",{attrs:{horizontal:""}},[s("div",{staticClass:"row",staticStyle:{width:"60%"}},[s("q-item-label",{staticClass:"col text-weight-bolder qItemLabelStyle",class:t.drawerState?"clase-blanca":"clase-negra",staticStyle:{"font-size":"0.9rem"},attrs:{overline:""}},[t._v(t._s(t.StatisticsLabel)+"\n            ")])],1),s("q-knob",{staticClass:"text-orange q-ma-md",attrs:{readonly:"","show-value":"",size:"90px",thickness:.22,color:"orange","track-color":"orange-3",max:100},model:{value:t.StatisticsValue,callback:function(e){t.StatisticsValue=e},expression:"StatisticsValue"}})],1)],1)])],1)],1)}),l=[],d={data(){return{AtencionFalla:0,"ReemplazoDaño":0,FallaRepentina:0,MantenimientoVigente:0,CumplirProgramados:0}},name:"StatisticsCard",props:{StatisticsValue:{type:Number,default:0},StatisticsLabel:{type:String,default:""}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},h=d,m=(s("f354"),s("2877")),u=s("f09f"),p=s("a370"),S=s("0170"),g=s("3845"),v=s("eebe"),b=s.n(v),f=Object(m["a"])(h,c,l,!1,null,"7d7c9dac",null),w=f.exports;b()(f,"components",{QCard:u["a"],QCardSection:p["a"],QItemLabel:S["a"],QKnob:g["a"]});var q=s("5d36"),y={name:"LayoutDefault",components:{CardStatistics:w},data(){return{AtencionFalla:0,"ReemplazoDaño":0,FallaRepentina:0,MantenimientoVigente:0,CumplirProgramados:0,TotalMantenimientos:[],EquiposInactivos:[],MantenimientosPreventivos:[],MantenimientosCorrectivos:[],MantenimientosPreventivosProgramados:0,TotalReportes:[],ReportesActivos:[],spinner:!0,ArrayStatistics:[{StatisticsValue:0,StatisticsLabel:"Atención a reportes de falla"},{StatisticsValue:0,StatisticsLabel:"Equipos médicos reemplazados por obsolencia o daño"},{StatisticsValue:0,StatisticsLabel:"Falla repentina de equipo médico"},{StatisticsValue:0,StatisticsLabel:"Equipos con certificado de mantenimiento vigente"},{StatisticsValue:0,StatisticsLabel:"Cumplimiento de mantenimientos preventivos programados"}]}},created(){let t=new Date;this.StatisticSectionSelected.Mes==t.getMonth()+1&&this.StatisticSectionSelected.Año==t.getFullYear()?this.doOperations:this._getStatistics},destroyed(){this.Estadisticas=[],this.spinner=!1},computed:{Equipos:{get(){return this.$store.state.cardState.Equipos},set(t){this.$store.commit("cardState/updateEquipments",t)}},async _getStatistics(){try{await this.$store.dispatch("cardState/getStatisticsAction",this.StatisticSectionSelected),this.dateStatistics}catch(t){this.$q.notify({color:"red-13",textColor:"white",icon:"search_off",message:"No existen estadísticas para este mes "+t})}this.spinner=!1},_getCards(){for(var t=0;t<this.Equipos.length;t++){!1===this.Equipos[t].Estado_Servicio&&this.EquiposInactivos.push(this.Equipos[t]);let e=(new Date).getMonth()+1;1==e.toString().length&&(e="0"+e.toString()),this.Equipos[t].Siguiente_Mantenimiento.slice(0,7)==(new Date).getFullYear().toString()+"-"+e&&(this.MantenimientosPreventivosProgramados+=1)}},async _getMantenimientos(){let t=new Date,e=t.getMonth()+1;1==e.toString().length&&(e="0"+e);var s={"Año":t.getFullYear(),Mes:e};const a=await q["a"].getAllMantenances(s);this.$data.TotalMantenimientos=a.data;for(var i=0;i<this.TotalMantenimientos.length;i++)"Preventivo"===this.TotalMantenimientos[i].Tipo_Mantenimiento?this.MantenimientosPreventivos.push(this.TotalMantenimientos[i]):"Correctivo"===this.TotalMantenimientos[i].Tipo_Mantenimiento&&this.MantenimientosCorrectivos.push(this.TotalMantenimientos[i])},_getReports(){this.$data.TotalReportes=this.Reportes;for(var t=0;t<this.TotalReportes.length;t++)this.TotalReportes[t].Status&&this.ReportesActivos.push(this.TotalReportes[t])},Reportes:{get(){return this.$store.state.cardState.Reportes},set(t){this.$store.commit("updateReportes",t)}},StatisticSectionSelected:{get(){return this.$store.state.cardState.StatisticSectionSelected},set(t){this.$store.commit("cardState/updateStatisticSectionSelected",t)}},Estadisticas:{get(){return this.$store.state.cardState.Estadisticas},set(t){this.$store.commit("cardState/updateStatistics",t)}},async doOperations(){this._getCards,this._getReports,await this._getMantenimientos,this.AtencionFalla=this.MantenimientosCorrectivos.length/this.TotalReportes.length*100,this.AtencionFalla=this.AtencionFalla.toFixed(2),this.ArrayStatistics[0].StatisticsValue=parseFloat(this.AtencionFalla),this.ReemplazoDaño=this.EquiposInactivos.length/this.Equipos.length*100,this.ReemplazoDaño=this.ReemplazoDaño.toFixed(2),this.ArrayStatistics[1].StatisticsValue=parseFloat(this.ReemplazoDaño),this.FallaRepentina=this.MantenimientosCorrectivos.length/this.Equipos.length*100,this.FallaRepentina=this.FallaRepentina.toFixed(2),this.ArrayStatistics[2].StatisticsValue=parseFloat(this.FallaRepentina),this.MantenimientoVigente=this.MantenimientosPreventivos.length/this.Equipos.length*100,this.MantenimientoVigente=this.MantenimientoVigente.toFixed(2),this.ArrayStatistics[3].StatisticsValue=parseFloat(this.MantenimientoVigente),this.CumplirProgramados=this.MantenimientosPreventivos.length/this.MantenimientosPreventivosProgramados*100,this.CumplirProgramados=this.CumplirProgramados.toFixed(2),this.ArrayStatistics[4].StatisticsValue=parseFloat(this.CumplirProgramados),this.spinner=!1},dateStatistics(){this.Estadisticas.Estadisticas.map((t=>{this.ArrayStatistics[t.Numero-1].StatisticsValue=t.Cantidad}))},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},C=y,M=(s("9404"),s("cf57")),x=Object(m["a"])(C,o,n,!1,null,"4503733c",null),$=x.exports;b()(x,"components",{QSpinnerGears:M["a"],QItemLabel:S["a"]});var F={components:{GridStatistics:$,UserAccount:r["a"]},data(){return{leftDrawerOpen:!1,home:!1}},computed:{drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}}}},_=F,R=(s("89cc"),s("4d5a")),E=s("e359"),V=s("65c6"),A=s("068f"),P=s("9c40"),k=s("09e3"),L=Object(m["a"])(_,a,i,!1,null,null,null);e["default"]=L.exports;b()(L,"components",{QLayout:R["a"],QHeader:E["a"],QToolbar:V["a"],QImg:A["a"],QBtn:P["a"],QItemLabel:S["a"],QPageContainer:k["a"]})},"57c0":function(t,e,s){},8775:function(t,e,s){},"89cc":function(t,e,s){"use strict";var a=s("9b62"),i=s.n(a);i.a},9404:function(t,e,s){"use strict";var a=s("57c0"),i=s.n(a);i.a},"9b62":function(t,e,s){},f354:function(t,e,s){"use strict";var a=s("8775"),i=s.n(a);i.a}}]);