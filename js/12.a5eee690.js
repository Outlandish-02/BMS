(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"04be":function(t,e,a){"use strict";var i=a("557b"),s=a.n(i);s.a},"3ebe":function(t,e,a){},"557b":function(t,e,a){},"63c2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-pa-md"},[i("q-layout",{attrs:{id:"q-app-2",view:"lHh Lpr lFf"}},[i("q-header",{staticClass:"glossy",class:t.drawerState?" bg-black":"bg-primary",staticStyle:{height:"150px"},attrs:{elevated:""}},[i("q-toolbar",{staticClass:"justify-center"},[i("q-img",{staticStyle:{"margin-top":"0.5rem",height:"60px",width:"100%","border-radius":"0.5rem"},attrs:{basic:"",src:a("4b51")}}),i("div",{staticClass:"fixed-top-right"},[i("user-account")],1)],1),i("div",{staticClass:"row",staticStyle:{"min-width":"900px"}},[i("div",{staticClass:"col-md-2 col-2",staticStyle:{"min-width":"900px"}},[i("q-img",{staticClass:"fixed-top-left",staticStyle:{height:"6.5rem",width:"7.3rem",margin:"1.3rem","border-radius":"0.5rem"},attrs:{basic:"",src:a("73b8")}},[t.home?i("div",{staticClass:"absolute-full text-subtitle2 flex flex-center"},[i("q-img",{staticStyle:{"margin-top":"-0.4rem"},attrs:{basic:"",src:a("fbf5")}})],1):t._e(),i("q-btn",{staticStyle:{height:"6.5rem",width:"7.3rem","border-radius":"0.5rem"},attrs:{to:"/Home"},on:{mouseover:function(e){t.home=!0},mouseleave:function(e){t.home=!1}}})],1)],1)]),i("div",{staticClass:"col-12",staticStyle:{"text-align":"center","margin-top":"1.7rem"}},[i("q-item-label",{staticStyle:{"font-size":"1.5rem",color:"white"},attrs:{overline:""}},[t._v("Mantenimientos de un equipo")])],1)],1),i("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem","margin-top":"-0.5rem"}}),i("div",{staticClass:"row no-wrap justify-end"},[i("div",{staticClass:"col-auto"},[1==t.Usuario.rol||2==t.Usuario.rol?i("q-btn",{staticStyle:{margin:"1rem 0rem 1rem 1rem"},attrs:{icon:"queue",label:"Agregar",color:"primary"},on:{click:function(e){return t.MaintenanceCreate()}}}):t._e(),1==t.Usuario.rol||2==t.Usuario.rol?i("q-btn",{staticStyle:{margin:"1rem 0rem 1rem 1rem"},attrs:{label:"Ver detalles",color:"primary",icon:"info"},on:{click:function(e){return t.obtenerSeleccionado()}}}):t._e(),i("q-btn",{staticStyle:{margin:"1rem 0 1rem 1rem"},attrs:{label:"Salir",icon:"logout",color:"primary",to:"/MaintenanceSectionEquipment"}})],1)]),i("div",{staticClass:"bg-blue-10 glossy",staticStyle:{width:"100%",height:"0.5rem","border-radius":"0.5rem"}}),i("q-page-container",{staticStyle:{"margin-top":"-8rem"}},[i("maintance-table"),i("br")],1)],1)],1)},s=[],r=a("dddf"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{staticClass:"my-sticky-header-table",attrs:{title:"Lista de Mantenimientos",data:t.data,columns:t.columns,"row-key":"index",flat:"",bordered:"",selection:"single",selected:t.selected,loading:t.loading,pagination:t.initialPagination},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[1==t.loading?a("q-spinner-gears",{staticClass:"self-center",staticStyle:{margin:"1rem"},attrs:{indeterminate:"",showing:"",reverse:"",size:"70px",thickness:1,color:"blue","track-color":"light-blue"}}):t._e()]},proxy:!0}])})],1)},n=[],l=(a("e6cf"),{data(){return{selected:[],loading:!0,alert:!1,initialPagination:{rowsPerPage:50},columns:[{name:"index",label:"#",field:"index"},{Tipo_Mantenimiento:"Tipo_Mantenimiento",required:!0,label:"Tipo de mantenimiento",align:"left",field:t=>t.Tipo_Mantenimiento,format:t=>""+t,sortable:!0},{Nombre_Encargado:"Nombre_Encargado",align:"left",label:"Nombre del encargado",field:"Nombre_Encargado",sortable:!0},{Fecha_Mantenimiento:"Fecha_Mantenimiento",align:"left",label:"AÃ±o - Mes",field:"Fecha",sortable:!0},{Dia:"Dia",align:"left",label:"Dia - hora",field:"Dia",sortable:!0},{Costo_Mantenimiento:"Costo_Mantenimiento",align:"left",label:"Gasto total",field:"Costo_Mantenimiento",sortable:!0,sort:(t,e)=>parseFloat(t,10)-parseFloat(e,10)}],data:[]}},created(){this.getMantenances();var t={Status:!1},e=t,a={reporte:e,lastRoute:this.$router.currentRoute.path};this.Flags=a},updated(){this.MantenimientoSelected=this.selected},methods:{async getMantenances(){try{await this.$store.dispatch("cardState/getMaintenancesByIdAction",this.IDEM),this.$data.data=this.Mantenimientos}catch(t){this.$q.notify({color:"red",textColor:"white",icon:"search_off",message:"Error cargando los mantenimientos para este equipo "+t})}await this.data.forEach(((t,e)=>{t.index=e})),0==this.data.length?(this.loading=!1,this.$q.notify({color:"blue-13",textColor:"white",icon:"search_off",timeout:1e3,message:"Aun no hay mantenimientos para este equipo"})):this.loading=!1}},computed:{IDEM:{get(){return this.$store.state.cardState.IDEM},set(t){this.$store.commit("cardState/updateIDEM",t)}},MantenimientoSelected:{get(){return this.$store.state.cardState.MantenimientoSelected},set(t){this.$store.commit("cardState/updateMantenimientoSelected",t)}},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}},MaintenanceSectionSelected:{get(){return this.$store.state.cardState.MaintenanceSectionSelected},set(t){this.$store.commit("cardState/updateMaintenanceSectionSelected",t)}},Mantenimientos:{get(){return this.$store.state.cardState.Mantenimientos},set(t){this.$store.commit("cardState/updateMaintenances",t)}}}}),c=l,d=(a("04be"),a("2877")),m=a("eaac"),u=a("cf57"),h=a("eebe"),g=a.n(h),p=Object(d["a"])(c,o,n,!1,null,null,null),b=p.exports;g()(p,"components",{QTable:m["a"],QSpinnerGears:u["a"]});var f={name:"EquipmentDetail",components:{UserAccount:r["a"],MaintanceTable:b},data(){return{leftDrawerOpen:!1,alert:!1,seleccionado:0,home:!1}},methods:{MaintenanceCreate(){1!=this.Usuario.rol&&2!=this.Usuario.rol||this.$router.push({path:"/MaintenanceCreate/"}),3!=this.Usuario.rol||this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"No tienes los permisos para crear un Mantenimiento"})},obtenerSeleccionado(){if(1==this.Usuario.rol||2==this.Usuario.rol){if(this.MantenimientoSelected.length>0){var t={ID_Reporte:"",ID_Equipo:"",Reporte:"",Status:!1},e={reporte:t,lastRoute:"/MaintenanceList/"};this.Flags=e,this.$router.push({path:"/MaintenanceDetail/"})}0===this.MantenimientoSelected.length&&this.$q.notify({position:"bottom",timeout:1e3,textColor:"white",type:"warning",message:"Seleccione un mantenimiento de la lista!!"})}3!=this.Usuario.rol||this.$q.notify({position:"bottom",timeout:2500,textColor:"white",type:"warning",message:"No tienes los permisos para ver un Mantenimiento"})}},computed:{MantenimientoSelected:{get(){return this.$store.state.cardState.MantenimientoSelected}},drawerState:{get(){return this.$store.state.showcase.drawerState?this.$q.dark.set(!0):this.$q.dark.set(!1),this.$store.state.showcase.drawerState},set(t){this.$store.commit("showcase/updateDrawerState",t)}},Usuario:{get(){return this.$store.state.global.Usuario},set(t){this.$store.commit("global/updateUsuario",t)}},Flags:{get(){return this.$store.state.global.Flags},set(t){this.$store.commit("global/updateFlags",t)}}}},S=f,w=(a("70b3"),a("4d5a")),y=a("e359"),M=a("65c6"),$=a("068f"),q=a("9c40"),v=a("0170"),C=a("09e3"),_=Object(d["a"])(S,i,s,!1,null,null,null);e["default"]=_.exports;g()(_,"components",{QLayout:w["a"],QHeader:y["a"],QToolbar:M["a"],QImg:$["a"],QBtn:q["a"],QItemLabel:v["a"],QPageContainer:C["a"]})},"70b3":function(t,e,a){"use strict";var i=a("3ebe"),s=a.n(i);s.a}}]);